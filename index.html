<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Avinya</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #ff4d6d;
            --text-color: #ffffff;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at bottom, #1B2735 0%, #090A0F 100%);
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            text-align: center;
            color: var(--text-color);
            cursor: none; /* We will use the moon as the cursor pointer */
        }

        /* Floating Moon Cursor */
        #moon {
            position: fixed;
            width: 60px;
            height: 60px;
            background: #fdfae1;
            border-radius: 50%;
            box-shadow: 0 0 20px #fdfae1, 0 0 60px rgba(255,255,255,0.4);
            pointer-events: none;
            z-index: 999;
            transition: transform 0.1s ease-out;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            color: rgba(0,0,0,0.2);
        }

        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: transparent url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/123163/stars.png') repeat;
            z-index: 0;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: #090A0F;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #counter {
            font-size: 4rem;
            color: var(--primary);
            font-family: 'Courier New', Courier, monospace;
        }

        /* Content containers */
        .screen { 
            display: none; 
            flex-direction: column; 
            align-items: center; 
            width: 90%; 
            max-width: 550px; 
            z-index: 10;
        }
        .active { display: flex; }

        h1 { 
            font-family: 'Dancing Script', cursive; 
            font-size: 3.2rem; 
            color: var(--primary); 
            text-shadow: 0 0 15px rgba(255, 77, 109, 0.6);
        }

        /* Letter Styling */
        .letter-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            padding: 40px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 280px;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.8);
        }

        #letterText {
            font-family: 'Dancing Script', cursive;
            font-size: 1.85rem;
            min-height: 150px;
            margin-bottom: 20px;
        }

        .btns { margin-top: 20px; display: flex; gap: 20px; justify-content: center; }
        
        button {
            padding: 12px 35px; font-size: 1.1rem; border: none; border-radius: 50px;
            cursor: pointer; transition: 0.3s; background: var(--primary); color: white;
            font-family: 'Quicksand', sans-serif; box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
            z-index: 1001; /* Ensure buttons are clickable above moon cursor */
        }

        /* Envelope */
        .envelope-wrapper { cursor: pointer; position: relative; width: 180px; height: 120px; background: #ff8fa3; margin-top: 50px; border-radius: 0 0 10px 10px; }
        .envelope-wrapper::before {
            content: ''; position: absolute; top: -80px; left: 0; border-left: 90px solid transparent;
            border-right: 90px solid transparent; border-bottom: 80px solid #ffb3c1;
        }
        .heart-seal {
            position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
            font-size: 45px; animation: beat 1.2s infinite;
        }

        @keyframes beat { 0%, 100% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.2); } }
    </style>
</head>
<body>

    <div id="moon"></div>
    <div class="stars"></div>

    <audio id="bgMusic" loop>
        <source src="love-story.mp3" type="audio/mpeg">
    </audio>

    <div id="loading-screen">
        <div style="letter-spacing: 3px; font-size: 0.9rem; opacity: 0.7;">MEASURING LOVE FOR AVINYA...</div>
        <div id="counter">0%</div>
        <div id="status" style="margin-top: 15px; color: #ff8fa3; font-weight: bold;">Initialising...</div>
    </div>

    <div id="screen1" class="screen">
        <h1>Hey Avinya,</h1>
        <p>Do you love me?</p>
        <div class="btns">
            <button onclick="showScreen('screenEnvelope')">Yes</button>
            <button onclick="showScreen('screenAngry')" style="background: #333;">No</button>
        </div>
    </div>

    <div id="screenAngry" class="screen">
        <h1 style="font-size: 5rem;">üò§</h1>
        <h1>How dare you!!</h1>
        <div class="btns">
            <button onclick="showScreen('screen1')">Retry</button>
        </div>
    </div>

    <div id="screenEnvelope" class="screen">
        <h1>For You...</h1>
        <p>Open the heart</p>
        <div class="envelope-wrapper" onclick="startLetter()">
            <div class="heart-seal">‚ù§Ô∏è</div>
        </div>
    </div>

    <div id="screenLetter" class="screen">
        <div class="letter-content">
            <p id="letterText"></p>
            <div class="btns">
                <button id="nextBtn" onclick="nextPage()" style="display: none;">Next</button>
            </div>
        </div>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        const moon = document.getElementById('moon');
        const textEl = document.getElementById('letterText');
        const nextBtn = document.getElementById('nextBtn');
        let currentPage = 0;
        let isTyping = false;

        const messages = [
            "I know we will never be together, but please allow me to tell you how, in a sky crowded with stars, you are the only moon I see.",
            "How among billions of faces in this world, it is only your eyes I ever search for.",
            "Let me tell you, how you are the fire I would reach for without fear of being burned, the warmth I would choose even knowing the cost.",
            "I know we will never be together, but please allow me to love you aloud. To love you in ways you have never heard and perhaps never felt.\n\nEven if only once.",
            "Your Presence Makes My Days Better.\n\nI love you.\n\n~Dark in"
        ];

        // Moon Follow Logic
        document.addEventListener('mousemove', (e) => {
            moon.style.left = e.clientX - 30 + 'px';
            moon.style.top = e.clientY - 30 + 'px';
        });

        // Loading Logic
        window.addEventListener('load', () => {
            let count = 0;
            const counterElement = document.getElementById('counter');
            const statusElement = document.getElementById('status');
            
            const interval = setInterval(() => {
                count += Math.floor(Math.random() * 7) + 2;
                if (count >= 100 && count < 300) statusElement.innerText = "BREAKING LIMITS...";
                if (count >= 1000) {
                    statusElement.innerText = "ERROR: LOVE INFINITE ‚ù§Ô∏è";
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('loading-screen').style.display = 'none';
                            showScreen('screen1');
                        }, 1000);
                    }, 1000);
                }
                counterElement.innerText = count + "%";
            }, 40);
        });

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function startLetter() {
            music.play();
            showScreen('screenLetter');
            typeWriter(messages[currentPage]);
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        }

        function typeWriter(text, i = 0) {
            isTyping = true;
            nextBtn.style.display = 'none';
            if (i < text.length) {
                textEl.innerHTML = text.substring(0, i + 1);
                setTimeout(() => typeWriter(text, i + 1), 50);
            } else {
                isTyping = false;
                nextBtn.style.display = 'inline-block';
                if (currentPage === messages.length - 1) {
                    nextBtn.innerText = "Hamesha ‚ù§Ô∏è";
                }
            }
        }

        function nextPage() {
            if (isTyping) return;
            if (currentPage < messages.length - 1) {
                currentPage++;
                typeWriter(messages[currentPage]);
            } else {
                confetti({ particleCount: 400, spread: 150 });
            }
        }
    </script>
</body>
</html>
